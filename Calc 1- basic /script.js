const display = document.getElementById("display"); // שליפת אלמנט התצוגה לפי ה-id שלו כדי שנוכל לעדכן את התוצאה המוצגת

const buttons = document.querySelectorAll("button"); // שליפת כל כפתורי המחשבון מהדף – נשתמש בהם כדי לזהות לחיצות

let currentInput = ""; // משתנה גלובלי ששומר את כל מה שהמשתמש מקליד (כמספרים ואותות חשבון), נתחיל מריק

buttons.forEach(button => { // עבור כל כפתור במערך הכפתורים, נבצע את הפונקציה הבאה (כלומר נקשיב ללחיצה עליו)

  button.addEventListener("click", () => { // מוסיפים "מאזין" ללחיצה – כשמשתמש לוחץ על כפתור, תתבצע הפונקציה שבתוך ה־()=>{}

    const value = button.innerText; // לוקחים את הטקסט שמופיע על הכפתור שנלחץ – לדוגמה: "7", "+", "=" או "C"

    if (value === "C") { // אם הכפתור שנלחץ הוא C – הכוונה היא לאיפוס

      currentInput = ""; // מאפסים את הקלט – מוחקים את מה שהוזן עד עכשיו

      display.innerText = "0"; // מעדכנים את התצוגה כך שתראה 0 – כמו שמחשבון אמיתי מתאפס

    } else if (value === "=") { // אם הכפתור שנלחץ הוא = – כלומר המשתמש רוצה לחשב את התוצאה

      try { // ננסה לבצע את החישוב – ואם משהו ישתבש, נעבור ל-catch כדי להציג שגיאה

        const result = eval(currentInput); // הפעלת eval על מחרוזת הקלט – מבצעת את החישוב (למשל "3+2" → 5)

        display.innerText = result; // מציגים את התוצאה במסך

        currentInput = result.toString(); // שומרים את התוצאה כמחרוזת – כך שהמשתמש יכול להמשיך ממנה

      } catch { // אם הייתה טעות (למשל הקלט לא תקין), נבצע את זה במקום

        display.innerText = "שגיאה"; // מציגים הודעת שגיאה במסך

        currentInput = ""; // מאפסים את הקלט אחרי טעות כדי לא להיתקע

      }

    } else { // אם זה לא C ולא = – אז זה כנראה מספר או סימן פעולה (כמו 1, 2, +, -, וכו')

      currentInput += value; // מוסיפים את הערך שנלחץ לסוף מחרוזת הקלט – בונים את הביטוי מתו לתו

      display.innerText = currentInput; // מעדכנים את התצוגה שתראה למשתמש את מה שהוא מקליד

    }

  });

});
